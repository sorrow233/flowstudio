:root {
  /* --- Water's Jade Green (水際の翡翠色) Design Tokens --- */

  /* Light Mode (Oat Milk & Jade) */
  --color-bg-light: #efeada;
  /* Oat Milk */
  --color-surface-light: #fbfdf9;
  /* Slightly lighter/cleaner than bg for cards */
  --color-text-main-light: #3b584b;
  /* Herbal Green - Strong contrast */
  --color-text-muted-light: #52796c;
  /* Mist Green - Softer text */
  --color-border-light: #c3c0aa;
  /* Sand Olive - Subtle borders */
  --color-border-hover-light: #819b85;
  /* Light Green - Hover state */

  /* Dark Mode (Forest Sleeping Color / 森が眠る色) */
  /* Winter Lilac (#383f4f) is the base. */
  --color-bg-dark: #2A2F3B;
  /* Slightly darker than Winter Lilac for depth */
  --color-surface-dark: #383f4f;
  /* Winter Lilac */
  --color-text-main-dark: #eee1d9;
  /* Snow Milk */
  --color-text-muted-dark: #ddc4b9;
  /* Petal Beige (warmth in the cold) */
  --color-border-dark: #6a7699;
  /* Dust Lavender */
  --color-border-hover-dark: #8b92a7;
  /* Lighter Grey-Blue */

  /* Accents (Mapped from Palettes) */
  --color-accent-sakura: #ddc4b9;
  /* Petal Beige (Replacing Pink) */
  --color-accent-sora: #6a7699;
  /* Dust Lavender (Replacing Blue) */
  --color-accent-matcha: #819b85;
  /* Light Green */
  --color-accent-kinari: #efeada;
  /* Oat Milk */

  /* Semantic Tokens */
  --bg-app: var(--color-bg-light);
  --bg-card: rgba(255, 255, 255, 0.6);
  /* Glassy feel on top of Oat Milk */
  --bg-glass: rgba(239, 234, 218, 0.7);
  /* Oat Milk Glass */
  --text-primary: var(--color-text-main-light);
  --text-secondary: var(--color-text-muted-light);
  --border-subtle: var(--color-border-light);
  --border-hover: var(--color-border-hover-light);
  --color-accent: var(--color-text-main-light);
  /* Primary action color */

  /* Ethereal Glows & Gradients */
  --glow-sakura: radial-gradient(circle at center, rgba(221, 196, 185, 0.15) 0%, transparent 60%);
  /* Petal Beige Glow */
  --glow-sora: radial-gradient(circle at center, rgba(106, 118, 153, 0.15) 0%, transparent 60%);
  /* Dust Lavender Glow */
  --gradient-fresh: linear-gradient(180deg, var(--color-bg-light) 0%, #fff 100%);

  /* Texture */
  --bg-noise: none;

  /* Shadows (Soft & Organic) */
  --shadow-sm: 0 2px 4px rgba(59, 88, 75, 0.05);
  /* Tinted with Herbal Green */
  --shadow-md: 0 8px 16px -4px rgba(59, 88, 75, 0.08);
  --shadow-lg: 0 20px 40px -8px rgba(59, 88, 75, 0.12);
  --shadow-glass: 0 8px 32px 0 rgba(59, 88, 75, 0.1);

  /* Spacing */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-6: 24px;
  --space-8: 32px;
  --space-12: 48px;
  --space-16: 64px;
  --space-20: 80px;
  --space-24: 96px;

  /* Typography */
  --font-display: 'Noto Sans JP', 'Inter', system-ui, sans-serif;
  --font-serif: 'Noto Serif JP', 'Georgia', serif;
  --font-sans: 'Noto Sans JP', 'Inter', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

  --tracking-tight: -0.01em;
  --tracking-normal: 0.02em;
  --tracking-wide: 0.05em;

  /* Radius */
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-xl: 28px;
  --radius-full: 9999px;

  /* Transitions */
  --transition-fast: 200ms ease-out;
  --transition-smooth: 500ms cubic-bezier(0.25, 0.1, 0.25, 1);
  --transition-slow: 800ms cubic-bezier(0.25, 0.1, 0.25, 1);
  --transition-spring: 700ms cubic-bezier(0.34, 1.2, 0.64, 1);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-app: var(--color-bg-dark);
    --bg-card: rgba(56, 63, 79, 0.7);
    /* Winter Lilac Glass */
    --bg-glass: rgba(56, 63, 79, 0.8);
    --text-primary: var(--color-text-main-dark);
    --text-secondary: var(--color-text-muted-dark);
    --border-subtle: var(--color-border-dark);
    --border-hover: var(--color-border-hover-dark);

    --color-accent: var(--color-text-main-dark);
    /* Snow Milk as accent in dark mode */

    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 8px 16px -4px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 20px 40px -8px rgba(0, 0, 0, 0.4);
  }
}

:root.dark {
  --bg-app: var(--color-bg-dark);
  --bg-card: rgba(56, 63, 79, 0.7);
  --bg-glass: rgba(56, 63, 79, 0.8);
  --text-primary: var(--color-text-main-dark);
  --text-secondary: var(--color-text-muted-dark);
  --border-subtle: var(--color-border-dark);
  --border-hover: var(--color-border-hover-dark);
  --color-accent: var(--color-text-main-dark);

  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 8px 16px -4px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 20px 40px -8px rgba(0, 0, 0, 0.4);
}

:root.light {
  --bg-app: var(--color-bg-light);
  --bg-card: rgba(255, 255, 255, 0.6);
  --bg-glass: rgba(239, 234, 218, 0.7);
  --text-primary: var(--color-text-main-light);
  --text-secondary: var(--color-text-muted-light);
  --border-subtle: var(--color-border-light);
  --border-hover: var(--color-border-hover-light);
  --color-accent: var(--color-text-main-light);

  --shadow-sm: 0 2px 4px rgba(59, 88, 75, 0.05);
  --shadow-md: 0 8px 16px -4px rgba(59, 88, 75, 0.08);
  --shadow-lg: 0 20px 40px -8px rgba(59, 88, 75, 0.12);
}

body {
  background-color: var(--bg-app);
  color: var(--text-primary);
  font-family: var(--font-sans);
  margin: 0;
  line-height: 1.7;
  /* Increased line height for breathability */
  letter-spacing: var(--tracking-normal);
  transition: background-color var(--transition-smooth), color var(--transition-smooth);
}

/* Noise overlay */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-image: var(--bg-noise);
  pointer-events: none;
  z-index: 9999;
  mix-blend-mode: overlay;
  /* Or multiply/soft-light depending on taste */
  opacity: 0.4;
}